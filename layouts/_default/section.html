{{ define "main" }}
  {{ partial "title.html" . }}
  
  <style>
    .gallery-container {
      display: grid;
      grid-template-columns: 1fr;
      gap: 2rem;
      padding: 2rem 1.5rem;
      max-width: 800px;
      margin: 0 auto;
    }

    .gallery-item {
      display: flex;
      flex-direction: column;
      cursor: pointer;
      border-radius: 0.5rem;
      overflow: hidden;
      transition: transform 0.3s ease;
      text-decoration: none;
    }

    .gallery-item:hover {
      transform: scale(1.02);
    }

    .gallery-item figure {
      margin: 0;
      width: 100%;
      aspect-ratio: 4/3;
    }

    .gallery-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
  </style>
  
  {{ if .Resources.ByType "image" }}
    <section class="gallery-container">
      {{ range $image := where (.Resources.ByType "image") "Params.hidden" "ne" true }}
        {{ $thumbnail := $image.Filter (slice images.AutoOrient (images.Process "fit 800x600")) }}
        <a class="gallery-item" href="{{ $image.RelPermalink }}" data-pswp-src="{{ $image.RelPermalink }}" data-pswp-width="{{ $image.Width }}" data-pswp-height="{{ $image.Height }}" title="{{ .Title }}">
          <figure>
            <img src="{{ $thumbnail.RelPermalink }}" alt="{{ .Title }}" />
          </figure>
        </a>
      {{ end }}
    </section>
  {{ end }}
  
  {{ with .Content }}
    <section class="prose">
      {{ . }}
    </section>
  {{ end }}
{{ end }}
